## Название

**Оплата** 

## Описание

Смарт-контракт **Оплата** предзнаначен для оплаты сервисов и продуктов **КинопоискHD** при помощи крипто-валюты.

Данная функциональность позволит осуществлять платежи за использование услуг сервиса минуя традиционные механизмы оплаты с использованием банковских сервисов типа Visa, Mastercard и т.п., что может оказаться актуальным в текущих условия блокирования работы этих сервисов на территории России.

## Основные функции

* Внесение оплаты за сервисы и продукты **КинопоискHD** в крипто-валюте.
* Получение информации о выполненных платежах.

## Основные сущности и их атрибуты в смарт-контракте

```plantuml
@startuml Payment

title "Сущности и их аттрибуты в смарт-контракте"

entity Merchant {
    * merchant : address
}

entity Payments {
    * customer : address
    * payment_transaction_id : uuid
    --
    * payment_value : uint
}

@enduml
```

## UML-диаграмма последовательности

```plantuml
@startuml Payment

title "Оплата посредством смарт-контракта"

participant "Аутентифицированный Пользователь" as AuthUser
participant "Frontend" as Frontend
participant "Backend" as Backend
participant "Смарт-контракт" as SmartContract

AuthUser -> Frontend : Оплатить подписку (покупку) посредством крипто-валюты
Frontend -> Backend : Данные платежа
Backend -> SmartContract : Данные платежа
SmartContract -> AuthUser : Введите данные крипто-кошелька
AuthUser -> SmartContract : Данные крипто-кошелька
SmartContract -> SmartContract : Выполнение перевода средств
alt "Платеж подтвержден"
    SmartContract -> SmartContract : Перевод среств со счета смарт-контракта на счет сервиса
    SmartContract -> Backend : Платеж подтвержден
    Backend -> Frontend : Платеж подтвержден
    Frontend -> AuthUser : Подписка (покупка) выполнена
else
    SmartContract -> AuthUser : Ошибка при выполнении платежа
end

@enduml
```

## Дополнительные идеи по развитию функциональности

* Добавить возможность автоматического перевода средств со счета смарт-контракта на счет сервиса по факту предоставления услуг (окончания очередного периода подписки, просмотра арендованного или купленного фильма).
* Добавить возможность выполнения периодических платежей (автоматическое продление подписки) в рамках работы смарт-контракта.
* Добавить возможность прекращения подписки и возврата неизрасходованных данных на крипто-кошелек отправителя.