# Введение

## Цели

Цель проекта - создание платного сервиса, предоставляющего возможность пользователям за абонентскую плату или единовременный платеж получить возможность просмотра фильмов, сериалов и т.п.  

## Соглашения о терминах

## Предполагаемая аудитория и последовательность восприятия

Аудитория проекта - более 20 миллионов человек.

Аудитория "Кинопоиска" — пользователи из разных социальных и возрастных групп. Это преимущественно жители крупных городов в возрасте от 25 до 40 лет, больше половины - мужчины.

## Масштаб проекта

Сервис "Кинопоиск" занимает первое место среди онлайн-кинотеатров России.

## Ссылки на источники

- [gRPC](https://grpc.io)
- [PCI DSS](https://ru.wikipedia.org/wiki/PCI_DSS)

# Общее описание

Сервис "Кинопоиск" предоставляет пользователям информацию о фильмах, сериалах (кадры, трейлеры, постеры, обои, данные об актёрах, режиссёрах и т.п.). Пользователи сервиса могут ставить оценки фильмам и сериалам, добавлять их в ожидаемые, писать рецензии. 

В составе сервиса имеется онлайн-кинотеатр с фильмами и сериалами доступными по подписке Яндекс.Плюс или за отдельную плату. Приложение Кинопоиск можно устанавливать на Android и iOS, Apple TV, Smart TV и PlayStation 4.

Для зарегистрированных пользователей существует возможность добавления и уточнения информации, касающейся фильмов. Каждое действие проходит премодерацию, продолжительность которой зависит от фильма.

## Видение продукта

## Функциональность продукта

Сервис "Кинопоиск" состоит из следующих функциональных блоков:
- Каталог
- Просмотр (плеер)
- Регистрация и аутентификация
- Личный кабинет
- Оплата

[Диаграма взаимодействия](https://github.com/mooncna/ilink/blob/main/UseCases/kinopoiskhd.md)

## Классы и характеристики пользователей

В системе предусмотрена работа следующих классов пользователей:
- Неаутентифицированный пользователь
- Аутентифицированный пользователь
- Модератор
- Администратор

**Неаутентифицированный пользователь** - пользователь который не выполнил регистрацию в системе или не произвел ввход в систему.

**Аутентифицированный пользователь** - пользователь который выполнил предварительную регистрацию в системе и выполнил вход в систему.

**Модератор** - пользователь обладающим правами внесения изменений в информацию о фильмах или сериалах, а так же имеющий права принимать изменения в информацию о фильмах от обычных пользователях сервиса.

**Администратор** - пользователь обладающий правами управления учетными записями пользователей сервиса, внесения изменений в каталог сервиса - добавления новых фильмов или сериалов, удаление фильмов или сериалов права на которые истекли у сервиса и т.п.

## Среда функционирования продукта (операционная среда)

### Backend

Сервера по управлением операционной системы Linux.

### Frontend

Браузеры:
- Google Chrome
- Mozilla Firefox
- Microsoft Edge
- Safari

### Мобильные приложения

Смартфоны и планшеты под управлением ОС:
- Android
- iOS

### Прочие устройства

- SmartTV
- Sony Playstation

## Рамки, ограничения, правила и стандарты

- Хранение исходного кода - git (GitLab, Gitea)
- CI/CD - Gitlab, Jenkins
- Проверка качества кода - SonarQube
- Среда окружения - development, testing, staging, production
- Обмен данными между подсистемами сервиса - gRPC

### Backend

- Язык программирования - Java 17, Go
- SQL СУБД - PostgreSQL 12
- Non-SQL СУБД - МongoDB 5
- Key-Value хранилище - Redis

### Frontend

- Язык программирования - JavaScript
- Библиотеки и Framework'и - React, Redux

## Документация для пользователей

Сервис должен продоставлять пользователям интуитивно-понятный интерфейс. Дополнительная документация не требуется.

## Допущения и зависимости

# Функциональность системы

## Функциональный блок Каталог

Идентификатор функционального блока - **catalog**.

### Описание и приоритет

Функциональный блок **Каталог** предоставляет возможность посмотреть каталог фильмов и выбрать фильмы по разным критериям (премьеры, рекомендации сервиса, фильмы получившие награды и премии, фильмы, разбитые по жанрам, странам, годам, рецензиям критиков, сборам, по направлениям).

Приоритет выполнения - **Высокий**.

### Причинно-следственные связи, алгоритмы (движение процессов, workflows)

Функциональный блок **Просмотр (плеер)** является базовым сервисом **Кинопоиска** и запускается при загрузке начальной странице **Кинопоиска**. 

[Диаграма взаимодействия](https://github.com/mooncna/ilink/blob/main/UseCases/catalog.md)

### Функциональные требования

## Функциональный блок Просмотр (плеер)

Идентификатор функционального блока - **player**.

### Описание и приоритет

Функциональный блок **Просмотр (плеер)** предоставляет возможность просмотра выбранного видеоконтента (трейлеров, фильмов по подписке, купленных фильмов, арендованных фильмов). 

Приоритет выполнения - **Высокий**.

### Причинно-следственные связи, алгоритмы (движение процессов, workflows)

Функциональный блок **Просмотр (плеер)** запускается при нажатии пользователем кнопки **Смотреть** на трейлере к фильму (сериалу) или на самом фильме (сериале), при наличии прав на его просмотр.

[Диаграма взаимодействия](https://github.com/mooncna/ilink/blob/main/UseCases/player.md)

### Функциональные требования

## Функциональный блок Регистрация и аутентификация

Идентификатор функционального блока - **auth**.

### Описание и приоритет

Функциональный блок **Регистрация и аутентификация** предоставляет возможность регистрации и авторизации пользователя в сервисе Кинопоиск. Регистрация происходит с помощью ввода адреса электронной почты или номера телефона и пароля. Для завершения регистрации необходимо выполнить подтверждение адреса электронной почты или номера телефона.

Приоритет выполнения - **Высокий**.

### Причинно-следственные связи, алгоритмы (движение процессов, workflows)

Функциональный блок **Регистрация и аутентификация** запускается при нажатии неаутентифицированным пользователем на ссылку **Войти**.

[Диаграма взаимодействия](https://github.com/mooncna/ilink/blob/main/UseCases/auth.md)

### Функциональные требования

[Диаграма последовательности Авторизации](https://github.com/mooncna/ilink/blob/main/Sequences/auth.md)

[Диаграма последовательности Авторизации по ID](https://github.com/mooncna/ilink/blob/main/Sequences/auth-id.md)

[Диаграма последовательности Регистрации](https://github.com/mooncna/ilink/blob/main/Sequences/registration.md)

## Функциональный блок Личный кабинет

Идентификатор функционального блока - **profile**.

### Описание и приоритет

Функциональный блок **Личный кабинет** предоставляет возможность хранить информацию, связанную с конкретным пользователем (профиль, покупки и т. п.).

Приоритет выполнения - **Средний**.

### Причинно-следственные связи, алгоритмы (движение процессов, workflows)

Функциональный блок **Личный кабинет** запускается при нажатии аутентифицированным пользователем на иконку с своим изображением.

[Диаграма взаимодействия](https://github.com/mooncna/ilink/blob/main/UseCases/profile.md)

### Функциональные требования

## Функциональный блок Оплата

Идентификатор функционального блока - **payment**.

### Описание и приоритет

Функциональный блок **Оплата** предоставляет возможность оплатить выбранный контент (подписку, фильм, аренду фильма).

Приоритет выполнения - **Средний**.

### Причинно-следственные связи, алгоритмы (движение процессов, workflows)

Функциональный блок **Оплата** запускается при попытке аутентифицированным пользователем сервиса выполнить:
- покупку фильма или сериала
- оформить подписку на сервис **Кинопоиск**

[Диаграма взаимодействия](https://github.com/mooncna/ilink/blob/main/UseCases/payment.md)

### Функциональные требования

[Диаграма последовательности](https://github.com/mooncna/ilink/blob/main/Sequences/payment.md)

# Требования к внешним интерфейсам

## Интерфейсы пользователя (UX)

- Диагональ - не менее 6"

## Программные интерфейсы

- Работа с внешними сервисами по протоколу HTTPS

## Интерфейсы оборудования

- Сервера на базе процессоров Intel

## Интерфейсы связи и коммуникации

- Подключение к сети Интернет по протоколам TCP/IP

# Нефункциональные требования

## Требования к производительности

- Сервис должен быть готов обслуживать не менее 10000 пользоваталей в один момент времени.
- Любая страница (экран) сервиса должна загружаться быстрее 3 секунд в среднем случае.

## Требования к сохранности (данных)

Эксплуатация сервиса должна предусматривать процедуры регулярного резервного копирования данных сервиса, которое позволит избежать потери данных и выполнить восстановление работоспособности сервиса в случае его выхода из строя менее чем за 1 сутки.   

## Требования к качеству программного обеспечения

В процессе разработки системы, разработчики должны использовать принятые в индустрии подходы к обеспечению качества кода, в том числе:
- Единый стандарт кодирования для выбранных языков программирования
- Функциональное тестирование
- Интеграционное тестирование
- Нагрузочное тестирование
- CI/CD
- A/B тестирование

Необходимо обеспечить не менее 75% покрытия тестами исходного кода.

## Требования к безопасности системы

Обмен данных между компонентами системы, между системой и пользователем должно осуществляться по протоколу **HTTPS**.

### Требования к сервису Оплата

Функционирование сервиса **Оплата** должно соответствовать стандарту **PCI DSS**.

### Требования к сервису Личный кабинет

Функционирование сервиса **Личный кабинет** должно соответствовать **ФЗ-152**.

## Требования на интеллектуальную собственность

В проекте должно использоваться открытое и свободнораспространяемое программное обеспечение, право на использование которого не требует от эксплуатанта сервиса раскрытия исходного кода проекта. 

# Прочее

## Приложение А: Глоссарий

**PCI DSS** - это стандарт безопасности данных индустрии платёжных карт, разработанный Советом по стандартам безопасности индустрии платежных карт (*Payment Card Industry Security Standards Council*, *PCI SSC*), учреждённым международными платёжными системами *Visa*, *MasterCard*, *American Express*, *JCB* и *Discover*

**ФЗ-152** - федеральный закон о персональных данных

## Приложение Б: Модели процессов и предметной области и другие диаграммы

## Приложение В: Список ключевых задач
