## Название

**Каталог**

## Описание

Микросервис **Каталог** предназначен для реализации функциональности по работе с каталогом фильмов, информация о которых
соджержиться в сервисе **КинопоискHD**.

Микросервис обеспечивает возможность как просмотра информации о фильме, так и внесении изменения в информацию фильма, если
возникнет такая необходимость.

Более детальная информация о функциональности микросервиса Каталог представлена в разделе **Основные функции**.

Базовая модель данных используемая микросервисом **Каталог** представлена в разделе **ER-диаграмма**.

## Основные функции

Микросервис **Каталог** может использоваться следующими категориями пользователей:
* Неаутентифицированный пользователь
* Аутентифицированный пользователь
* Модератор
* Администратор

Для всех категорий пользователей, микросервис **Каталог** предоставляет возможность просмотра информации о фильме в виде карточки фильма. Содержимое карточки фильма варьируется в зависимости от категории пользователя.

Карточка фильма для неатентифицированного пользователя содержит информацию о фильме и возможность просмотреть трейлер фильма
и другие рекламные медиа-материалы (постеры, фото и видео материалы со сьемок фильма и т.п.).

Карточка фильма для аутентифицированного пользователя кроме той информации, которая отображается для неаутентифицированного 
пользователя, предоставляет возможность просмотреть фильм (посредством перенаправления запроса пользователя микросервису
**Проигрыватель**) при условии, что у пользователя есть права на эту операцию (оплачена подписка или приобретен фильм или
его аренда). За авторизацию права пользователя на просмотр того или иного фильма каталога отвечает микросервис **Профиль**.
Кроме этого, для аутентифицированного пользователя, карточка фильма предоставляет интерфейс для добавления фильма в тот или
иной список пользователя (**Буду смотреть**, **Смотрел** и т. п.).

Для модератора карточка фильма предоставляет интерфейс по внесению изменений в описание фильма или добавления описания на
другом языке.

Для администратора карточка фильма предоставляет интерфейс по созданию и удалению информации о фильме, а также те же
возможности, что и модератору системы.

### Новые функции

Для сервиса **КинопоискHD** предалагается реализовать новую возможность - пользователи в процессе просмотра фильма могут
оставить свою реакцию на тот или иной момент фильма в виде *эмоджи*, а так же пользователи могут дополнительно в процессе просмотра фильма включить просмотр реакций других пользователей, находящихся у них в *друзьях*, на текущий момент фильма. 
Микросервис **Каталог** отвечает за хранение и извлечение информации о *реакции*. Отображение реакций и оставления реакций
осуществляется в микросервисе **Проигрыватель**.

Механизм работы *реакций* - пользователь по нажатию дополнительной кнопки в режиме просмотра фильма может включить или 
отключить отображение *реакций*. В режиме отображения *реакций* миркосервис **Проигрыватель** будет отправлять запрос 
микросервису **Каталог** на наличие *реакций* и отображать их при наличии. Использую еще одну дополнительную кнопку 
пользователь может вызвать модальное окно для выбора *эмоджи* соответствующего текущему моменту фильма - миркосервис
**Проигрыватель** передаст информацию о пользователе, моменте фильма и выбранной *эмоджи* микросервису **Каталог**
для хранения этих данных.

Модель данных для поддержки новой функциональности отображена в ER-диаграмме микросервиса **Каталог**.

Прототип новой фукнции реализован в Figma.  

## ER-диаграмма

[ER-диаграмма микросервиса Каталог](https://github.com/mooncna/ilink/blob/main/ER/catalog.md)

## Прототип в Figma

[Firma](https://www.figma.com/file/XYS6wQzrxmOuH1iM2af9xE/Kinopoisk?node-id=0%3A1)